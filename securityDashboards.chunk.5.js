(window["securityDashboards_bundle_jsonpfunction"] = window["securityDashboards_bundle_jsonpfunction"] || []).push([[5], { 483: function (module, exports, __webpack_require__) { switch (window.__osdThemeTag__) { case "v7dark": return __webpack_require__(484); case "v7light": return __webpack_require__(486); case "v8dark": return __webpack_require__(488); case "v8light": return __webpack_require__(490); case "v9dark": return __webpack_require__(492); case "v9light": return __webpack_require__(494) } }, 484: function (module, exports, __webpack_require__) { var api = __webpack_require__(12); var content = __webpack_require__(485); content = content.__esModule ? content.default : content; if (typeof content === "string") { content = [[module.i, content, ""]] } var options = {}; options.insert = "head"; options.singleton = false; var update = api(content, options); module.exports = content.locals || {} }, 485: function (module, __webpack_exports__, __webpack_require__) { "use strict"; __webpack_require__.r(__webpack_exports__); var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(4); var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default = __webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__); var ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()((function (i) { return i[1] })); ___CSS_LOADER_EXPORT___.push([module.i, "/*!\n * SPDX-License-Identifier: Apache-2.0\n *\n * The OpenSearch Contributors require contributions made to\n * this file be licensed under the Apache-2.0 license or a\n * compatible open source license.\n *\n * Modifications Copyright OpenSearch Contributors. See\n * GitHub history for details.\n */\n\n.login-wrapper{margin:10% auto;width:400px;padding:40px;position:relative}.btn-login{width:100%}\n", ""]); __webpack_exports__["default"] = ___CSS_LOADER_EXPORT___ }, 486: function (module, exports, __webpack_require__) { var api = __webpack_require__(12); var content = __webpack_require__(487); content = content.__esModule ? content.default : content; if (typeof content === "string") { content = [[module.i, content, ""]] } var options = {}; options.insert = "head"; options.singleton = false; var update = api(content, options); module.exports = content.locals || {} }, 487: function (module, __webpack_exports__, __webpack_require__) { "use strict"; __webpack_require__.r(__webpack_exports__); var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(4); var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default = __webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__); var ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()((function (i) { return i[1] })); ___CSS_LOADER_EXPORT___.push([module.i, "/*!\n * SPDX-License-Identifier: Apache-2.0\n *\n * The OpenSearch Contributors require contributions made to\n * this file be licensed under the Apache-2.0 license or a\n * compatible open source license.\n *\n * Modifications Copyright OpenSearch Contributors. See\n * GitHub history for details.\n */\n\n.login-wrapper{margin:10% auto;width:400px;padding:40px;position:relative}.btn-login{width:100%}\n", ""]); __webpack_exports__["default"] = ___CSS_LOADER_EXPORT___ }, 488: function (module, exports, __webpack_require__) { var api = __webpack_require__(12); var content = __webpack_require__(489); content = content.__esModule ? content.default : content; if (typeof content === "string") { content = [[module.i, content, ""]] } var options = {}; options.insert = "head"; options.singleton = false; var update = api(content, options); module.exports = content.locals || {} }, 489: function (module, __webpack_exports__, __webpack_require__) { "use strict"; __webpack_require__.r(__webpack_exports__); var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(4); var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default = __webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__); var ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()((function (i) { return i[1] })); ___CSS_LOADER_EXPORT___.push([module.i, "/*!\n * SPDX-License-Identifier: Apache-2.0\n *\n * The OpenSearch Contributors require contributions made to\n * this file be licensed under the Apache-2.0 license or a\n * compatible open source license.\n *\n * Modifications Copyright OpenSearch Contributors. See\n * GitHub history for details.\n */\n\n.login-wrapper{margin:10% auto;width:400px;padding:40px;position:relative}.btn-login{width:100%}\n", ""]); __webpack_exports__["default"] = ___CSS_LOADER_EXPORT___ }, 490: function (module, exports, __webpack_require__) { var api = __webpack_require__(12); var content = __webpack_require__(491); content = content.__esModule ? content.default : content; if (typeof content === "string") { content = [[module.i, content, ""]] } var options = {}; options.insert = "head"; options.singleton = false; var update = api(content, options); module.exports = content.locals || {} }, 491: function (module, __webpack_exports__, __webpack_require__) { "use strict"; __webpack_require__.r(__webpack_exports__); var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(4); var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default = __webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__); var ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()((function (i) { return i[1] })); ___CSS_LOADER_EXPORT___.push([module.i, "/*!\n * SPDX-License-Identifier: Apache-2.0\n *\n * The OpenSearch Contributors require contributions made to\n * this file be licensed under the Apache-2.0 license or a\n * compatible open source license.\n *\n * Modifications Copyright OpenSearch Contributors. See\n * GitHub history for details.\n */\n\n.login-wrapper{margin:10% auto;width:400px;padding:40px;position:relative}.btn-login{width:100%}\n", ""]); __webpack_exports__["default"] = ___CSS_LOADER_EXPORT___ }, 492: function (module, exports, __webpack_require__) { var api = __webpack_require__(12); var content = __webpack_require__(493); content = content.__esModule ? content.default : content; if (typeof content === "string") { content = [[module.i, content, ""]] } var options = {}; options.insert = "head"; options.singleton = false; var update = api(content, options); module.exports = content.locals || {} }, 493: function (module, __webpack_exports__, __webpack_require__) { "use strict"; __webpack_require__.r(__webpack_exports__); var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(4); var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default = __webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__); var ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()((function (i) { return i[1] })); ___CSS_LOADER_EXPORT___.push([module.i, "/*!\n * SPDX-License-Identifier: Apache-2.0\n *\n * The OpenSearch Contributors require contributions made to\n * this file be licensed under the Apache-2.0 license or a\n * compatible open source license.\n *\n * Modifications Copyright OpenSearch Contributors. See\n * GitHub history for details.\n */\n\n.login-wrapper{margin:10% auto;width:400px;padding:40px;position:relative}.btn-login{width:100%}\n", ""]); __webpack_exports__["default"] = ___CSS_LOADER_EXPORT___ }, 494: function (module, exports, __webpack_require__) { var api = __webpack_require__(12); var content = __webpack_require__(495); content = content.__esModule ? content.default : content; if (typeof content === "string") { content = [[module.i, content, ""]] } var options = {}; options.insert = "head"; options.singleton = false; var update = api(content, options); module.exports = content.locals || {} }, 495: function (module, __webpack_exports__, __webpack_require__) { "use strict"; __webpack_require__.r(__webpack_exports__); var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(4); var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default = __webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__); var ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()((function (i) { return i[1] })); ___CSS_LOADER_EXPORT___.push([module.i, "/*!\n * SPDX-License-Identifier: Apache-2.0\n *\n * The OpenSearch Contributors require contributions made to\n * this file be licensed under the Apache-2.0 license or a\n * compatible open source license.\n *\n * Modifications Copyright OpenSearch Contributors. See\n * GitHub history for details.\n */\n\n.login-wrapper{margin:10% auto;width:400px;padding:40px;position:relative}.btn-login{width:100%}\n", ""]); __webpack_exports__["default"] = ___CSS_LOADER_EXPORT___ }, 633: function (module, __webpack_exports__, __webpack_require__) { "use strict"; __webpack_require__.r(__webpack_exports__); __webpack_require__.d(__webpack_exports__, "renderApp", (function () { return renderApp })); var _index = __webpack_require__(483); var external_osdSharedDeps_React_ = __webpack_require__(0); var external_osdSharedDeps_React_default = __webpack_require__.n(external_osdSharedDeps_React_); var external_osdSharedDeps_ReactDom_ = __webpack_require__(17); var external_osdSharedDeps_ReactDom_default = __webpack_require__.n(external_osdSharedDeps_ReactDom_); var external_osdSharedDeps_ElasticEui_ = __webpack_require__(1); var wazuh_logo = __webpack_require__.p + "30e500f584235c2912f16c790345f966.svg"; var login_utils = __webpack_require__(99); var common = __webpack_require__(3); var storage_utils = __webpack_require__(26); function getNextPath(serverBasePath) { const urlParams = new URLSearchParams(window.location.search); let nextUrl = urlParams.get("nextUrl"); if (!nextUrl || nextUrl.toLowerCase().includes("//")) { nextUrl = serverBasePath + "/" } const savedTenant = Object(storage_utils["a"])(); const url = new URL(window.location.protocol + "//" + window.location.host + nextUrl + window.location.hash); if (!!savedTenant && !(url.searchParams.has("security_tenant") || url.searchParams.has("securitytenant") || url.searchParams.has("securityTenant_"))) { url.searchParams.append("security_tenant", savedTenant) } return url.pathname + url.search + url.hash } function redirect(serverBasePath) { window.location.href = getNextPath(serverBasePath) } function extractNextUrlFromWindowLocation() { const urlParams = new URLSearchParams(window.location.search); let nextUrl = urlParams.get("nextUrl"); if (!nextUrl || nextUrl.toLowerCase().includes("//")) { return "" } else { nextUrl = encodeURIComponent(nextUrl); const hash = window.location.hash || ""; nextUrl += hash } return `?nextUrl=${nextUrl}` } function LoginPage(props) { const [username, setUsername] = external_osdSharedDeps_React_default.a.useState(""); const [password, setPassword] = external_osdSharedDeps_React_default.a.useState(""); const [loginFailed, setloginFailed] = Object(external_osdSharedDeps_React_["useState"])(false); const [loginError, setloginError] = Object(external_osdSharedDeps_React_["useState"])(""); const [usernameValidationFailed, setUsernameValidationFailed] = Object(external_osdSharedDeps_React_["useState"])(false); const [passwordValidationFailed, setPasswordValidationFailed] = Object(external_osdSharedDeps_React_["useState"])(false); let errorLabel = null; if (loginFailed) { errorLabel = external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiText"], { id: "error", color: "danger", textAlign: "center" }, external_osdSharedDeps_React_default.a.createElement("b", null, loginError)) } const handleSubmit = async e => { e.preventDefault(); setloginFailed(false); setUsernameValidationFailed(false); setPasswordValidationFailed(false); if (username === "") { setUsernameValidationFailed(true); return } if (password === "") { setPasswordValidationFailed(true); return } try { await Object(login_utils["a"])(props.http, username, password); redirect(props.http.basePath.serverBasePath) } catch (error) { console.log(error); setloginFailed(true); setloginError("Invalid username or password. Please try again."); return } }; const renderLoginButton = (authType, loginEndPoint, buttonConfig) => { const buttonId = `${authType}_login_button`; const loginEndPointWithPath = `${props.http.basePath.serverBasePath}${loginEndPoint}`; return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiCompressedFormRow"], null, external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButton"], { "data-test-subj": "submit", "aria-label": buttonId, size: "s", type: "prime", className: buttonConfig.buttonstyle || "btn-login", href: loginEndPointWithPath, iconType: buttonConfig.showbrandimage ? buttonConfig.brandimage : "" }, buttonConfig.buttonname)) }; const formOptions = options => { let formBody = []; const formBodyOp = []; let authOpts = []; if (typeof options === "string") { if (options !== "") { authOpts.push(options.toLowerCase()) } } else if (!(options && options.length === 1 && options[0] === "")) { authOpts = [...options] } if (authOpts.length === 0) { authOpts.push(common["i"].BASIC) } authOpts = authOpts.filter(auth => auth !== common["i"].PROXY && auth !== common["i"].JWT); for (let i = 0; i < authOpts.length; i++) { switch (authOpts[i].toLowerCase()) { case common["i"].BASIC: { formBody.push(external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiCompressedFormRow"], null, external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiCompressedFieldText"], { "data-test-subj": "user-name", "aria-label": "username_input", placeholder: "Username", icon: "user", onChange: e => setUsername(e.target.value), value: username, isInvalid: usernameValidationFailed }))); formBody.push(external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiCompressedFormRow"], { isInvalid: passwordValidationFailed }, external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiCompressedFieldPassword"], { "data-test-subj": "password", "aria-label": "password_input", placeholder: "Password", type: "dual", onChange: e => setPassword(e.target.value), value: password, isInvalid: usernameValidationFailed }))); const buttonId = `${common["i"].BASIC}_login_button`; formBody.push(external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiCompressedFormRow"], null, external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButton"], { "data-test-subj": "submit", "aria-label": buttonId, fill: true, size: "s", type: "submit", className: props.config.ui.basicauth.login.buttonstyle || "btn-login", onClick: handleSubmit }, "Log in"))); if (props.config.auth.anonymous_auth_enabled) { const anonymousConfig = props.config.ui[common["i"].ANONYMOUS].login; formBody.push(renderLoginButton(common["i"].ANONYMOUS, common["a"], anonymousConfig)) } if (authOpts.length > 1) { formBody.push(external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"], { size: "xs" })); formBody.push(external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiHorizontalRule"], { size: "full", margin: "xl" })); formBody.push(external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"], { size: "xs" })) } break } case common["i"].OPEN_ID: { const oidcConfig = props.config.ui[common["i"].OPEN_ID].login; const nextUrl = extractNextUrlFromWindowLocation(); const oidcAuthLoginUrl = common["q"] + nextUrl; formBodyOp.push(renderLoginButton(common["i"].OPEN_ID, oidcAuthLoginUrl, oidcConfig)); break } case common["i"].SAML: { const samlConfig = props.config.ui[common["i"].SAML].login; const nextUrl = extractNextUrlFromWindowLocation(); const samlAuthLoginUrl = common["C"] + nextUrl; formBodyOp.push(renderLoginButton(common["i"].SAML, samlAuthLoginUrl, samlConfig)); break } default: { setloginFailed(true); setloginError(`Authentication Type: ${authOpts[i]} is not supported for multiple authentication.`); break } } } formBody = formBody.concat(formBodyOp); return formBody }; return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiListGroup"], { className: "login-wrapper" }, props.config.ui.basicauth.login.showbrandimage && external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiImage"], { size: "fullWidth", alt: "", style: { marginTop: "10px", marginBottom: "20px" }, url: props.config.ui.basicauth.login.brandimage || wazuh_logo }), external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"], { size: "s" }), external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiText"], { size: "m", textAlign: "center" }, props.config.ui.basicauth.login.title || ""), external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"], { size: "s" }), external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiText"], { size: "s", textAlign: "center" }, props.config.ui.basicauth.login.subtitle || ""), external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"], { size: "s" }), external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiForm"], { component: "form" }, formOptions(props.config.auth.type), errorLabel)) } function renderApp(coreStart, params, config) { external_osdSharedDeps_ReactDom_default.a.render(external_osdSharedDeps_React_default.a.createElement(LoginPage, { http: coreStart.http, chrome: coreStart.chrome, config: config }), params.element); return () => external_osdSharedDeps_ReactDom_default.a.unmountComponentAtNode(params.element) } } }]);